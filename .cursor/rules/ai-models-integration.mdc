---
description: 
globs: 
alwaysApply: false
---
{
  "type": "agent_requested",
  "title": "AI模型集成规范",
  "description": "AI模型集成的关键规范和约定"
}

# AI模型集成规范

## 核心位置

- **模型代码**: `models/clothing_recognition/`, `models/image_generation/`
- **服务封装**: `backend/app/services/` (clothing_recognition.py, llm_service.py, image_generation.py)

## 集成原则

- **异步处理**: 耗时AI推理通过Celery异步处理
- **错误处理**: 实现超时(30秒)、重试和回退机制
- **配置**: API密钥通过环境变量配置，不硬编码
- **日志**: 记录模型调用耗时和错误

## 核心模型

- **服装识别**: ResNet50基础架构，模型选择通过`.env`中的`ACTIVE_CLOTHING_MODEL`配置
- **DeepSeek**: 生成穿搭策略，提示词存放在`backend/app/core/prompts/`
- **图像生成**: Stable Diffusion + ControlNet，GPU实例部署

## 参考文档

- 模型管理: [model-management.mdc](mdc:.cursor/rules/model-management.mdc)
- 模型设计: [ai_models_design.md](mdc:ai_models_design.md)
